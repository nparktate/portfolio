/* mobile-fixes.css - Specialized fixes for mobile and touch devices */

/* Fix iOS 100vh issue with CSS variables */
:root {
  --vh: 1vh;
}

/* Apply correct viewport height */
body, html, 
.categories-container,
.projects-container,
#project-details {
  height: calc(var(--vh, 1vh) * 100);
  max-height: calc(var(--vh, 1vh) * 100);
  overscroll-behavior: none;
}

/* Improve touch interactions */
@media (pointer: coarse) {
  /* Prevent text selection and callouts */
  body {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    touch-action: manipulation;
  }
  
  /* Disable hover effects that cause flickering */
  .category-text:hover,
  .back-button:hover,
  .project-item:hover,
  .hero-image:hover,
  .detail-item:hover,
  .gallery-item:hover,
  .project-link:hover {
    transform: none !important;
    box-shadow: none !important;
  }
  
  /* Larger touch targets */
  .back-button,
  .project-link {
    padding: 0.9rem 1.5rem;
    min-height: 44px;
    min-width: 44px;
  }
  
  .project-item {
    padding: 1.2rem 1rem;
    min-height: 44px;
  }
  
  /* Fix specific iOS issues */
  .categories-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Handle device notches and safe areas */
  .categories-container,
  .projects-container,
  #project-details {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Fix overflow issues on mobile */
@media (max-width: 768px) {
  body, html {
    overflow: hidden;
    position: fixed;
    width: 100%;
    max-width: 100%;
  }
  
  .category.active {
    width: 40% !important;
  }
  
  .projects-container {
    width: 60% !important;
    max-width: 60% !important;
  }
  
  /* Improve scrolling */
  .categories-container {
    scroll-snap-type: y mandatory;
    scroll-behavior: smooth;
  }
  
  .category {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }
  
  /* Fix text size on small devices */
  .category-text {
    font-size: clamp(1rem, 5vw, 2rem) !important;
  }
  
  /* Prevent projects container from disappearing on short viewports */
  .projects-container {
    min-height: calc(var(--vh, 1vh) * 100);
    bottom: 0;
  }
  
  /* Ensure project details take full viewport */
  #project-details {
    width: 100vw;
    max-width: 100vw;
  }
}

/* Fix specific Android WebView issues */
@supports (-webkit-appearance:none) and (not (overflow:-webkit-marquee)) and (not (-ms-ime-align:auto)) and (not (-moz-appearance:none)) {
  body {
    height: 100vh;
    max-height: -webkit-fill-available;
  }
  
  .categories-container {
    height: 100vh;
    max-height: -webkit-fill-available;
  }
}

/* Adjust for iPhone notch in landscape */
@media screen and (orientation: landscape) and (max-height: 500px) {
  .project-header {
    padding-left: max(1.5rem, env(safe-area-inset-left));
    padding-right: max(1.5rem, env(safe-area-inset-right));
  }
  
  .category.active {
    width: 30% !important;
  }
  
  .projects-container {
    width: 70% !important;
    max-width: 70% !important;
  }
}

/* Loading and transition states for smoother mobile experience */
body.loading * {
  animation-play-state: paused !important;
  transition: none !important;
}

/* Default animations for project page elements */
.project-hero, .project-description h3, 
.project-description p, .detail-item, .gallery-item {
  opacity: 0;
  transform: translateY(20px);
  animation: mobile-fade-in 0.5s forwards cubic-bezier(0.16, 1, 0.3, 1);
  animation-delay: var(--delay, 0s);
}

@keyframes mobile-fade-in {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Prevent horizontal bounce on iOS */
html, body {
  position: fixed;
  overflow: hidden;
  width: 100%;
  height: 100%;
}

.categories-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}